/* SmartChem refreshed theme — light, clean, techy, subtle
   - Each major element styled with soft shadows, smooth transitions
   - Colors tuned to be pleasant and not too loud
   - Accessibility: readable font-size, focus states, reduced-motion support
*/
:root{
  /* palette */
  --bg: #f6fbfa;            /* page background */
  --panel: #ffffff;         /* cards */
  --muted: #5f6b72;        /* secondary text */
  --text: #052634;         /* primary text */
  --accent: #0ea5a0;       /* primary accent (teal) */
  --accent-2: #2cb6a8;     /* secondary accent */
  --glass: rgba(14,165,160,0.06);
  --shadow-1: 0 6px 18px rgba(6,22,33,0.06);
  --shadow-2: 0 10px 30px rgba(6,22,33,0.08);
  --radius: 12px;
  --nav-width: 220px;
  --transition: 220ms cubic-bezier(.2,.9,.2,1);
  --max-width: 1200px;
  --glass-border: rgba(6,22,33,0.03);
  --glass-2: rgba(14,165,160,0.03);
  --success: #19a974;
  --badge-bg: rgba(14,165,160,0.08);
  --focus-outline: rgba(14,165,160,0.18);
  --card-border: rgba(6,22,33,0.03);
  --shadow-accent: 0 8px 20px rgba(14,165,160,0.06);
}

/* ========== base ========== */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
  background: linear-gradient(180deg,var(--bg), #eefaf6);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding-left: var(--nav-width);
  transition: background var(--transition);
}

a{ color:var(--accent-2); text-decoration:none; }
a:hover{ text-decoration:underline; }

img{ display:block; max-width:100%; height:auto }

/* focus visible for accessibility */
:focus{ outline: none; }
:focus-visible{ outline: 3px solid var(--focus-outline); outline-offset: 3px }

/* utility */
.container{ width:100%; max-width:var(--max-width); margin:0 auto; padding:0 16px }
.row{ display:flex; gap:16px; align-items:center }
.small{ font-size:13px }
.muted{ color:var(--muted) }

/* ========== NAV ========== */
nav{
  position:fixed; top:0; left:0; width:var(--nav-width); height:100vh; padding:20px 14px;
  display:flex; flex-direction:column; gap:12px; background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.66));
  border-right:1px solid var(--glass-border);
  box-shadow: 0 6px 18px rgba(6,22,33,0.03);
  z-index:1000;
  backdrop-filter: blur(8px) saturate(1.05);
}
nav > div, nav > a{ display:flex; align-items:center; gap:10px; padding:9px; border-radius:10px; cursor:pointer; transition: transform var(--transition), background var(--transition), box-shadow var(--transition); }
nav > div:hover{ transform: translateX(6px) translateZ(0); background: rgba(255,255,255,0.9); box-shadow: var(--shadow-1); }
nav > div:active, nav > a:active{ transform: translateX(2px) }
.favicon{ width:30px; height:30px; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.06)); }
.logo-title{ font-weight:700; color: rgba(0,145,113,0.9); letter-spacing:0.2px }

/* small icon label styles */
nav .learn-logo, nav .exercise-logo, nav .link-logo, nav .download-logo, .chatbot-logo{ width:22px; height:22px }

/* ========== MID / layout ========== */
.mid-section{ min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:30px 36px; }
.mid-wrap{ width:100%; max-width:var(--max-width); display:flex; flex-direction:column; gap:18px }

/* header */
.header-panel{ display:flex; align-items:center; gap:12px; justify-content:space-between; margin-bottom:6px }
.header-left h1{ margin:0; font-size:20px; letter-spacing:0.2px }
.header-left .muted{ font-size:13px; color:var(--muted) }
.global-progress{ padding:8px 14px; border-radius:999px; background: linear-gradient(180deg, rgba(14,165,160,0.06), rgba(14,165,160,0.02)); font-weight:700; color:var(--accent-2); box-shadow: var(--shadow-accent) }

/* roadmap container */
.roadmap{ background: var(--panel); border-radius:var(--radius); padding:18px; box-shadow: var(--shadow-2); border:1px solid var(--card-border); transition: transform var(--transition), box-shadow var(--transition) }

/* chapter (card-like) */
.chapter{ border-radius:10px; padding:12px; background: linear-gradient(180deg,#fff,#fbfffd); border:1px solid var(--card-border); transition: transform var(--transition), box-shadow var(--transition); overflow:hidden }
.chapter + .chapter{ margin-top:12px }
.chapter:hover{ transform: translateY(-4px); box-shadow: 0 14px 30px rgba(6,22,33,0.06) }

.chapter-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; cursor:pointer; padding:6px 2px }
.chapter-left{ display:flex; align-items:center; gap:12px }
.chapter-index{ min-width:40px; height:40px; display:grid; place-items:center; border-radius:10px; background: linear-gradient(180deg,#e8feff,#d6fbf7); font-weight:800; color:#003b46; box-shadow: inset 0 -6px 12px rgba(14,165,160,0.04) }
.chapter-title{ font-weight:800; font-size:16px }
.pct-badge{ background: var(--badge-bg); padding:6px 10px; border-radius:999px; color:var(--accent-2); font-weight:800; font-size:13px }

/* chapter body (collapsible) */
.chapter-body{ margin-top:10px; display:none; flex-direction:column; gap:10px; padding-left:8px }

/* lesson rows */
.lesson-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px; border-radius:10px; background: linear-gradient(180deg, rgba(250,250,250,0.95), rgba(246,250,249,0.98)); border:1px solid rgba(6,22,33,0.02); transition: transform var(--transition), box-shadow var(--transition), background var(--transition); }
.lesson-row:hover{ transform: translateY(-3px); box-shadow: 0 8px 18px rgba(6,22,33,0.04); background: linear-gradient(180deg,#ffffff,#f8fffe) }
.lesson-row:active{ transform: translateY(-1px) }
.lesson-name{ font-weight:700; color:var(--text); display:flex; gap:10px; align-items:center }
.lesson-right{ display:flex; gap:8px; align-items:center; min-width:120px; justify-content:flex-end }

/* type pill and status */
.type-pill{ padding:6px 10px; border-radius:999px; font-weight:800; font-size:12px; background: linear-gradient(90deg, rgba(14,165,160,0.08), rgba(44,182,168,0.03)); color:var(--accent-2); border:1px solid rgba(14,165,160,0.08) }
.status-text{ font-size:13px; color:var(--muted) }

/* theory block — emphasized */
.theory-block{
  display:block; margin-top:18px; padding:16px 18px; border-radius:14px; background: linear-gradient(90deg, rgba(14,165,160,0.06), rgba(22,200,170,0.02)); border: 1px solid rgba(14,165,160,0.10); box-shadow: 0 8px 18px rgba(14,165,160,0.04);
}
.theory-block a{ display:block; text-decoration:none; font-weight:900; font-size:18px; color:var(--accent-2) }

/* small badges, labels */
.badge{ display:inline-block; padding:6px 8px; border-radius:999px; font-weight:700; font-size:12px }
.badge-soft{ background: rgba(6,22,33,0.04); color:var(--muted) }
.badge-accent{ background: rgba(14,165,160,0.10); color:var(--accent-2); border:1px solid rgba(14,165,160,0.06) }

/* focus landing highlight */
.focus-landing{ box-shadow: 0 10px 36px rgba(14,165,160,0.06); border-color: rgba(14,165,160,0.14); transform: translateY(-6px) }

/* subtle divider */
.hr-sub{ height:1px; background: linear-gradient(90deg, rgba(6,22,33,0.03), rgba(6,22,33,0.01)); border-radius:2px; margin:8px 0 }

/* responsive */
@media (max-width:1000px){
  body{ padding-left:0 }
  nav{ position:relative; width:100%; height:auto; display:flex; flex-wrap:wrap; padding:12px }
  .mid-wrap{ padding:12px }
  .chapter-body{ padding-left:0 }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce){ *{ transition:none!important; animation:none!important } }

/* small helpers for js toggles */
.is-open{ display:flex !important }
.hidden{ display:none !important }

/* subtle hover/focus for clickable areas */
[role="button"]{ cursor:pointer }
[role="button"]:hover{ filter: brightness(1.01) }

/* final polishing: scrollbar for .mid-section (when scrollable) */
.mid-section{
  --scr-bg: rgba(6,22,33,0.06);
}
.mid-section::-webkit-scrollbar{ width:10px }
.mid-section::-webkit-scrollbar-thumb{ background: linear-gradient(180deg, rgba(6,22,33,0.06), rgba(6,22,33,0.04)); border-radius:999px }

/* Status badges: viewed / not-viewed / incomplete */
.status-viewed{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: rgba(25,169,116,0.08); color:var(--success); font-weight:800; font-size:13px; border:1px solid rgba(25,169,116,0.08); box-shadow: 0 4px 12px rgba(25,169,116,0.04) }
.status-unviewed{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: rgba(6,22,33,0.03); color:var(--muted); font-weight:700; font-size:13px; border:1px solid rgba(6,22,33,0.02) }
.status-pending{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: linear-gradient(90deg, rgba(250,200,80,0.06), rgba(250,220,120,0.03)); color:#b76d00; font-weight:800; font-size:13px; border:1px solid rgba(214,152,40,0.06) }
.status-complete{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: rgba(14,165,160,0.10); color:var(--accent-2); font-weight:800; font-size:13px; border:1px solid rgba(14,165,160,0.06) }

/* Variant for lessons marked as theory — styled like section headings */
.lesson-row[data-type="theory"], .lesson-row[type="theory"]{
  background: transparent; 
  padding:12px 14px; 
  border-left:4px solid var(--accent-2);
  border-bottom:1px solid rgba(6,22,33,0.04);
  margin-top:14px;
  font-size:15px; 
  font-weight:900; 
  color:var(--accent-2);
  box-shadow:none;
}
.lesson-row[data-type="theory"] .lesson-name{ font-weight:900; font-size:15px; color:var(--accent-2) }
.lesson-row[data-type="theory"] .type-pill{ display:none }

/* Topic header & spacing to visually separate groups */
.topic-title{ margin-top:18px; margin-bottom:8px; font-weight:900; font-size:15px; padding-bottom:8px; border-bottom:1px dashed rgba(6,22,33,0.03); color:var(--text) }
.chapter-body .topic{ margin-top:12px; padding-top:6px }

/* small helpers */
.status-viewed, .status-unviewed, .status-pending, .status-complete{ transition: box-shadow var(--transition), transform var(--transition) }
.status-viewed:hover, .status-complete:hover{ transform: translateY(-2px); box-shadow: 0 8px 18px rgba(14,165,160,0.06) }

/* end of stylesheet */

/* Logo: tròn, nền xám đậm với gradient nhẹ */
.lesson-icon{
  width:40px;
  height:40px;
  min-width:40px;
  border-radius:50%;
  display:grid;
  place-items:center;
  background: linear-gradient(180deg, #4a4f55, #2b2f33); /* xám đậm -> hơi sáng ở trên */
  box-shadow: 0 8px 22px rgba(6,22,33,0.14);
  padding:6px;
  flex-shrink:0;
  transition: transform var(--transition), box-shadow var(--transition);
}

/* Đảm bảo ảnh vừa vặn, không bị kéo */
.lesson-icon-img{
  width:22px;
  height:22px;
  max-width:100%;
  max-height:100%;
  object-fit:contain;
  display:block;
  filter: none; /* nếu cần, có thể thêm filter để icon sáng/đậm */
}

/* Variant nhẹ cho theory (giữ dấu nhấn nhưng nền vẫn tròn xám đậm) */
.lesson-row[data-type="theory"] .lesson-icon{
  background: linear-gradient(180deg, #5feee0 10%, #3ad9c8 60%); /* tùy ý - nếu muốn xanh nhạt cho theory */
  box-shadow: 0 8px 20px rgba(14,165,160,0.08);
}

/* Hover nhỏ */
.lesson-icon:hover{
  transform: translateY(-3px) scale(1.03);
  box-shadow: 0 12px 28px rgba(6,22,33,0.18);
}

/* đảm bảo layout icon + title luôn thẳng hàng */
.lesson-row > div:first-child{ display:flex; align-items:center; gap:12px; }

/* ===== Type badge (base) ===== */
.lesson-type-badge,
.type-pill {
  display:inline-block;
  padding:6px 10px;
  border-radius:999px;
  font-weight:700;
  font-size:12px;
  line-height:1;
  min-height:30px;
  display:flex;
  align-items:center;
  border:1px solid transparent;
  transition: background var(--transition), color var(--transition), border-color var(--transition), box-shadow var(--transition), transform var(--transition);
  box-shadow: 0 3px 8px rgba(6,22,33,0.03);
}

/* small colored dot (left) using pseudo-element */
.lesson-type-badge::before,
.type-pill::before {
  content: "";
  width:8px;
  height:8px;
  border-radius:50%;
  display:inline-block;
  flex-shrink:0;
  margin-left:0;
  margin-right:6px;
  background: rgba(6,22,33,0.06);
  box-shadow: none;
}

/* ===== Per-type styles (uses data-type on .lesson-row) ===== */

/* Lý thuyết */
.lesson-row[data-type="theory"] .lesson-type-badge,
.lesson-row[data-type="theory"] .type-pill {
  background: linear-gradient(180deg, rgba(14,165,160,0.08), rgba(14,165,160,0.03));
  color: var(--accent-2);
  border-color: rgba(14,165,160,0.12);
  box-shadow: 0 6px 18px rgba(14,165,160,0.04);
}
.lesson-row[data-type="theory"] .lesson-type-badge::before,
.lesson-row[data-type="theory"] .type-pill::before {
  background: var(--accent-2);
}

/* Video */
.lesson-row[data-type="video"] .lesson-type-badge,
.lesson-row[data-type="video"] .type-pill {
  background: linear-gradient(180deg, rgba(58,123,213,0.08), rgba(58,123,213,0.03));
  color: #2b6fcf;
  border-color: rgba(58,123,213,0.12);
  box-shadow: 0 6px 18px rgba(43,111,207,0.04);
}
.lesson-row[data-type="video"] .lesson-type-badge::before,
.lesson-row[data-type="video"] .type-pill::before {
  background: #2b6fcf;
}

/* Tài nguyên / other */
.lesson-row[data-type="other"] .lesson-type-badge,
.lesson-row[data-type="other"] .type-pill {
  background: linear-gradient(180deg, rgba(114,89,255,0.06), rgba(114,89,255,0.02));
  color: #6f4cff;
  border-color: rgba(114,89,255,0.10);
  box-shadow: 0 6px 18px rgba(111,76,255,0.03);
}
.lesson-row[data-type="other"] .lesson-type-badge::before,
.lesson-row[data-type="other"] .type-pill::before {
  background: #6f4cff;
}

/* Bài tập (ex1 / ex2 / ex3 grouped) */
.lesson-row[data-type^="ex"] .lesson-type-badge,
.lesson-row[data-type^="ex"] .type-pill {
  background: linear-gradient(180deg, rgba(250,200,80,0.08), rgba(250,200,80,0.03));
  color: #b76d00;
  border-color: rgba(214,152,40,0.08);
  box-shadow: 0 6px 18px rgba(214,152,40,0.03);
}
.lesson-row[data-type^="ex"] .lesson-type-badge::before,
.lesson-row[data-type^="ex"] .type-pill::before {
  background: #b76d00;
}

/* Chủ đề / name */
.lesson-row[data-type="name"] .lesson-type-badge,
.lesson-row[data-type="name"] .type-pill {
  background: linear-gradient(180deg, rgba(6,22,33,0.04), rgba(6,22,33,0.01));
  color: var(--muted);
  border-color: rgba(6,22,33,0.04);
  box-shadow: 0 6px 12px rgba(6,22,33,0.03);
}
.lesson-row[data-type="name"] .lesson-type-badge::before,
.lesson-row[data-type="name"] .type-pill::before {
  background: rgba(6,22,33,0.12);
}

/* Fallback: any other type (use neutral styling) */
.lesson-row:not([data-type]) .lesson-type-badge,
.lesson-row:not([data-type]) .type-pill,
.lesson-row[data-type=""] .lesson-type-badge,
.lesson-row[data-type=""] .type-pill {
  background: rgba(6,22,33,0.03);
  color: var(--muted);
  border-color: rgba(6,22,33,0.02);
}

/* Style cho các hàng 'Chủ đề' (lesson-name-row) */
.lesson-name-row {
  display: flex;
  align-items: center;
  justify-content: center; /* căn giữa toàn bộ nội dung hàng */
  gap: 12px;
  padding: 12px 16px;
  margin-top: 8px 0;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(11,99,255,0.04), rgba(11,99,255,0.02)); /* nhẹ nhàng */
  box-shadow: 0 2px 6px rgba(8,30,60,0.04);
}

/* Icon giữ nguyên nhưng nhỏ gọn và căn giữa với text */
.lesson-name-row .lesson-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  flex: 0 0 44px;
  border-radius: 8px;
  background: rgba(9, 57, 161, 0.6); /* subtle */
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}

/* đảm bảo img vừa khung */
.lesson-name-row .lesson-icon-img {
  max-width: 26px;
  max-height: 26px;
  display: block;
  margin: 0 auto;
}

/* Tên chủ đề nổi bật hơn */
.lesson-name-row .lesson-name {
  font-weight: 700;            /* đậm */
  font-size: 1.05rem;          /* hơi lớn */
  color: #5f7cbb;              /* màu nổi, bạn có thể đổi */
  text-align: center;          /* căn giữa text */
  line-height: 1.1;
  text-shadow: 0 1px 0 rgba(11,99,255,0.06);
}

/* nếu có badge 'Chủ đề' — đặt dưới tên hoặc ẩn tùy cần */
.lesson-name-row .lesson-type-badge {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 600;
  background: rgba(11,99,255,0.08);
  color: #0b63ff;
}

/* Ẩn cột trạng thái cho hàng 'name' (không hiển thị 'Đã xem/Chưa xem') */
.lesson-name-row .lesson-right {
  display: none;
}

/* Tweak responsive: giảm kích thước trên màn nhỏ */
@media (max-width: 520px) {
  .lesson-name-row { padding: 10px; gap: 8px; }
  .lesson-name-row .lesson-icon { width: 38px; height: 38px; }
  .lesson-name-row .lesson-icon-img { max-width: 22px; max-height: 22px; }
  .lesson-name-row .lesson-name { font-size: 1rem; }
}

